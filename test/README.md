# Тесты конференц-системы

Этот каталог содержит тесты для проверки связи, статусов, подключений и функциональности конференции.

## Структура тестов

- `helpers/test-server.mjs` - Утилита для запуска тестового сервера
- `server/connection.test.mjs` - Тесты подключений Socket.IO
- `server/registration.test.mjs` - Тесты регистрации пользователей
- `server/webrtc-signaling.test.mjs` - Тесты WebRTC сигнализации
- `integration/conference.test.mjs` - Интеграционные тесты конференции

## Запуск тестов

```bash
# Установить зависимости
npm install

# Запустить все тесты
npm test

# Запустить тесты в режиме наблюдения
npm run test:watch
```

## Описание тестов

### Connection Tests
Проверяют:
- Подключение к серверу Socket.IO
- Отключение от сервера
- Множественные подключения
- Статус подключения
- Переподключение

### Registration Tests
Проверяют:
- Регистрацию нового пользователя
- Регистрацию с deviceId
- Получение списка существующих пользователей
- События подключения/отключения пользователей
- Работу с несколькими пользователями

### WebRTC Signaling Tests
Проверяют:
- Инициализацию peer соединений
- Передачу WebRTC сигналов (offer, answer, ICE candidates)
- Обработку ошибок при сигнализации
- Множественные peer соединения

### Conference Integration Tests
Проверяют:
- Полный поток присоединения к конференции
- Покидание конференции
- WebRTC сигнализацию в конференции
- Одновременное присоединение нескольких пользователей
- Статус конференции и количество пользователей

## Примечания

- Тесты используют отдельную тестовую базу данных (`data/test-users.json`)
- Тестовый сервер запускается на порту 3001 по умолчанию
- Каждый тест очищает базу данных после выполнения

